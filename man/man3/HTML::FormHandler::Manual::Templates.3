.\" Automatically generated by Pod::Man 2.25 (Pod::Simple 3.20)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\" ========================================================================
.\"
.IX Title "HTML::FormHandler::Manual::Templates 3"
.TH HTML::FormHandler::Manual::Templates 3 "2014-08-02" "perl v5.16.3" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
HTML::FormHandler::Manual::Templates \- using templates
.SH "VERSION"
.IX Header "VERSION"
version 0.40057
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
Manual Index
.PP
Documentation on templates to use with HTML::FormHandler
.SH "Using templates"
.IX Header "Using templates"
There is a FormHandler Template Toolkit rendering role at
HTML::FormHandler::Render::WithTT, with a testcase in t/render_withtt.t.
Normally, however, it probably won't make much sense to use both a
\&\s-1TT\s0 parser in FormHandler, and a separate one for the \*(L"complete\*(R" templates,
so the \s-1TT\s0 renderer is mainly useful for tests,
or as an example of how to do \s-1TT\s0 rendering with \s-1HFH\s0. You should
create a template to render your form and then pass the template name
and a template variable containing your form object to your templating
or view engine, in whatever way you normally do that. If you want
to use the 'process_attrs' function, you need to set that in your
template variables too.
.PP
A common way of using FormHandler with templates is to use the template
for layout, specifying the divs and spans and wrappers, and then
use the form object to render just the input fields.
.PP
In your form:
.PP
.Vb 1
\&    has \*(Aq+widget_wrapper\*(Aq => ( default => \*(AqNone\*(Aq );
.Ve
.PP
In your Catalyst controller:
.PP
.Vb 1
\&    $c\->stash( form => $form, template => \*(Aqform.tt\*(Aq );
.Ve
.PP
\&..or do the equivalent for your web framework/view.
.PP
In a form template (form.tt in the previous controller example):
.PP
.Vb 8
\&    <form id="myform" action="/myaction" method="post">
\&        <div class="span9">
\&            <span class="label">My Foo</span>
\&            [% form.field(\*(Aqfoo\*(Aq).render %]
\&        </div>
\&        <div class="span7">[% form.field(\*(Aqbar\*(Aq).render %]</div>
\&        [% form.field(\*(Aqsave\*(Aq).render %]
\&    </form>
.Ve
.PP
However, you can also render entirely with templates.
There are lots of different ways to set up templates. There are sample
templates installed in FormHandler's 'share' directory. These templates
are now organized more-or-less similarly to the widget roles, with 'field',
\&'wrapper', and 'form' directories, but many other organizations are possible.
.PP
There is also a template which combines the template rendering code into
one file, 'share/templates/form/form_in_one.tt'. You can copy this template
into your own \s-1TT\s0 directories, perhaps as form.tt, and then specify it
as the template for your Catalyst actions. You can customize it by adding
additional widget and widget_wrapper blocks, and then setting those in your
field definitions.
.PP
Note that widget names usually are camelcased, like the Moose roles that
implement them in the Widget directory. You may want to use the
non-camelcased widget/wrapper names in your \s-1TT\s0 templates, using
the \f(CW\*(C`$field\->uwidget\*(C'\fR (un-camelcased widget name) and
\&\f(CW\*(C`$field\->twidget\*(C'\fR (un-camelcased widget name + '.tt') convenience methods.
('MySpecialWidget' is the equivalent of 'my_special_widget')
.PP
.Vb 2
\&   has_field \*(Aqmy_field\*(Aq => ( widget => \*(AqMySpecialWidget\*(Aq );
\&   has_field \*(Aqanother_field\*(Aq => ( widget => \*(AqYetAnotherWidget\*(Aq );
.Ve
.PP
And include them in a generic template:
.PP
.Vb 1
\&   [% PROCESS widget/form_start.tt %]
\&
\&   [% FOREACH f IN form.sorted_fields %]
\&      [% PROCESS widget/${f.twidget} %]
\&   [% END %]
\&
\&   [% PROCESS widget/form_end.tt %]
.Ve
.SH "Field attributes"
.IX Header "Field attributes"
If you want to use the 'process_attrs' function to pull in \s-1HTML\s0 attributes
for the input elements, wrappers, and labels, you would need to pass that
function into your \s-1TT\s0 setup. See HTML::FormHandler::Render::WithTT for an
example:
.PP
.Vb 2
\&    use HTML::FormHandler::Render::Util (\*(Aqprocess_attrs\*(Aq);
\&    $c\->stash( process_attrs => &process_attrs ); # or add to TT vars in your view
\&
\&    <label [% process_attrs(f.label_attributes) %]for="[% f.html_name %]">
\&    [% f.label %]: </label>
\&    <input type="[% f.input_type %]" name="[% f.html_name %]" id="[% f.id %]"
\&    [% process_attrs(f.attributes) %] value="[% f.fif %]">
.Ve
.SH "Sample templates"
.IX Header "Sample templates"
The following is copied from the provided share/templates/form/form_in_one.tt file,
as an example. Note that some fields, like form actions of 'submit' & 'reset', don't
use the 'fif' value, but just the plain field value.
.PP
.Vb 10
\&    [% PROCESS form_start \-%]
\&    <div class="form_messages">
\&    [% FOREACH err IN form.form_errors \-%]
\&      <span class="error_message">[% err %]</span>
\&    [% END \-%]
\&    </div>
\&    [% FOREACH f IN form.sorted_fields \-%]
\&      [% WRAPPER "wrapper_${f.uwrapper}" \-%][% PROCESS "${f.uwidget}" \-%][% END \-%]
\&    [% END \-%]
\&    [% PROCESS form_end \-%]
\&
\&    [% BLOCK form_start \-%]
\&    <form[% process_attrs(form.attributes) %]>
\&    [% END \-%]
\&
\&    [% BLOCK form_end \-%]
\&    </form>
\&    [% END \-%]
\&
\&    [% BLOCK button \-%]
\&    <input type="button" name="[% f.html_name %]" id="[% f.id %]"
\&        [% process_attrs(f.attributes) %] value="[% f.value %]" />
\&    [% END \-%]
\&
\&    [% BLOCK checkbox \-%]
\&    <input type="checkbox" name="[% f.html_name %]" id="[% f.id %]"
\&       [% process_attrs(f.attributes) %] value="[% f.checkbox_value \-%]"
\&       [% IF f.fif == f.checkbox_value \-%] checked="checked"[% END ~%] />[%~ ~%]
\&    [% END \-%]
\&
\&    [% BLOCK checkbox_group \-%]
\&    [% FOR option IN f.options \-%]
\&      <label class="checkbox" for="[% f.name %].[% loop.index %]">
\&      <input type="checkbox" value="[% option.value %]" name="[% f.name %]"
\&         id="[% f.name %].[% loop.index %]"
\&         [% FOREACH selval IN f.fif \-%]
\&           [% IF selval == option.value %] checked="checked"[% END \-%]
\&         [% END \-%]>
\&      [% option.label | html %]
\&      </label>
\&    [% END \-%]
\&    [% END \-%]
\&
\&    [% BLOCK compound \-%]
\&    [% FOREACH sf IN f.sorted_fields \-%]
\&      [% outerf = f; f = sf; \-%]
\&      [% WRAPPER "wrapper_${f.uwrapper}" %][% PROCESS "${f.uwidget}" \-%][% END \-%]
\&      [% f = outerf \-%]
\&    [% END \-%]
\&    [% END \-%]
\&
\&    [% BLOCK hidden \-%]
\&    <input type="hidden" name="[% f.html_name %]" id="[% f.id %]"
\&        [% process_attrs(f.attributes) %] value="[% f.fif %]" />
\&    [% END \-%]
\&
\&    [% BLOCK password \-%]
\&    <input type="password" name="[% f.html_name %]" id="[% f.id %]"
\&        [% process_attrs(f.attributes) %] value="[% f.fif %]" />
\&    [% END \-%]
\&
\&    [% BLOCK radio_group \-%]
\&    [% FOR option IN f.options \-%]
\&      <label for="[% f.id %].[% loop.index %]">
\&      <input type="radio" value="[% option.value %]" name="[% f.name %]"
\&        id="[% f.id %].[% loop.index %]"
\&        [% IF option.value == f.fif %] checked="checked"[% END %] />
\&      [% option.label %]
\&      </label>
\&    [% END \-%]
\&    [% END \-%]
\&
\&    [% BLOCK repeatable \-%]
\&    [% FOREACH rf IN f.sorted_fields \-%]
\&      [% outerrf = f; f = rf; \-%]
\&      [% WRAPPER "wrapper_${f.uwrapper}" %][% PROCESS "${f.uwidget}" \-%][% END \-%]
\&      [% f = outerrf \-%]
\&    [% END \-%]
\&    [% END \-%]
\&
\&    [% BLOCK reset \-%]
\&    <input type="reset" name="[% f.html_name %]" id="[% f.id %]"
\&        [% process_attrs(f.attributes) %] value="[% f.value %]" />
\&    [% END \-%]
\&
\&    [% BLOCK select \-%]
\&    <select name="[% f.html_name %]" id="[% f.id %]"[% process_attrs(f.attributes) %]
\&      [% IF f.multiple %] multiple="multiple" size="[% f.size %]" [% END \-%]>
\&      [% FOR option IN f.options \-%]
\&      <option id="[% f.id %].[% loop.index %]" value="[% option.value \-%]"
\&          [% FOREACH selval IN f.fif \-%]
\&            [% IF selval == option.value %] selected="selected"[% END \-%]
\&          [% END \-%]>
\&          [% option.label | html %]
\&      </option>
\&      [% END \-%]
\&    </select>
\&    [% END \-%]
\&
\&    [% BLOCK submit \-%]
\&    <input type="submit" name="[% f.html_name %]" id="[% f.id %]"
\&        [% process_attrs(f.attributes) %] value="[% f.value %]" />
\&    [% END \-%]
\&
\&    [% BLOCK text \-%]
\&    <input type="[% f.input_type %]" name="[% f.html_name %]" id="[% f.id %]"
\&       [% process_attrs(f.attributes) %] value="[% f.fif %]" />
\&    [% END \-%]
\&
\&    [% BLOCK textarea \-%]
\&    <textarea name="[% f.html_name %]" id="[% f.id %]" rows="[% f.rows %]"
\&       cols="[% f.cols %]" [% process_attrs(f.attributes) %]>[% f.fif %]</textarea>
\&    [% END \-%]
\&
\&    [% BLOCK upload \-%]
\&    <input type="file" name="[% f.html_name %]" id="[% f.html_name %]"
\&        [% process_attrs(f.attributes) %] />
\&    [% END \-%]
\&
\&    [% BLOCK wrapper_simple \-%]
\&    <div[% process_attrs(f.wrapper_attributes) \-%]>
\&      [% IF f.do_label %][% PROCESS label %][% END \-%]
\&      [% content \-%]
\&    </div>
\&    [% END \-%]
\&
\&    [% BLOCK label \-%]
\&    <label [% process_attrs(f.label_attributes) %]for="[% f.html_name %]">[% f.label %]</label>
\&    [% END \-%]
\&
\&    [% BLOCK wrapper_wrap_label \-%]
\&    <div[% process_attrs(f.wrapper_attributes) %]>
\&        <label[% process_attrs(f.label_attributes) %] for="[% f.html_name %]">
\&           [%~ content ~%][%~ f.label %]
\&        </label>
\&    </div>
\&    [% END \-%]
\&
\&    [% BLOCK wrapper_none \-%]
\&    [% content %]
\&    [% END \-%]
\&
\&    [% BLOCK wrapper_fieldset \-%]
\&    <fieldset[% process_attrs(f.wrapper_attributes)%]><legend>[% f.label %]</legend>
\&    [% content \-%]
\&    </fieldset>
\&    [% END \-%]
.Ve
.SH "AUTHOR"
.IX Header "AUTHOR"
FormHandler Contributors \- see HTML::FormHandler
.SH "COPYRIGHT AND LICENSE"
.IX Header "COPYRIGHT AND LICENSE"
This software is copyright (c) 2014 by Gerda Shank.
.PP
This is free software; you can redistribute it and/or modify it under
the same terms as the Perl 5 programming language system itself.
